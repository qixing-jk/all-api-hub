# よくある質問

プラグインの使用中に発生する可能性のある一般的な質問をいくつか集めました。

## 🔐 認証方法関連

### CookieモードとAccess Token方式の違いは何ですか？

プラグインは2つの認証方法をサポートしています。

| 認証方法 | 特徴 | 適用シナリオ | 推奨度 |
|---------|------|---------|---------|
| **Access Token** | ✅ マルチアカウント対応<br>✅ 永久有効、期限切れなし<br>✅ より安全で安定 | ほとんどの標準的なプロキシサイト | ⭐⭐⭐⭐⭐ 強く推奨 |
| **Cookie** | ⚠️ シングルアカウント<br>⚠️ 期限切れの可能性あり<br>✅ 互換性が高い | Tokenに制限がある特殊なサイト<br>改変されたサイト | ⭐⭐⭐ 特殊な状況で使用 |

**Access Token方式の使用を推奨します**。ただし、以下のような状況ではこの限りではありません。
- サイトがアクセストークンをサポートしていない
- 改変版のプロキシサイトを使用している
- Token機能が無効になっている

### 認証方法を切り替えるにはどうすればよいですか？

アカウントを追加する際に、アカウントダイアログで対応する認証方法を選択してください。
1. 「アカウントを追加」をクリックします。
2. サイトアドレスを入力します。
3. 「認証方法」のドロップダウンリストから `Access Token` または `Cookie` を選択します。
4. 「自動認識」をクリックします。

## 🔧 特殊サイトの問題

### AnyRouterサイトでエラーが発生した場合はどうすればよいですか？

AnyRouterは改変版のプロキシサイトであり、標準のAccess Token方式はサポートしていません。

**解決策**：
1. アカウントを追加する際に、**Cookieモード**を選択します。
2. まずブラウザでAnyRouterサイトにログインします。
3. その後、プラグインの自動認識機能を使用してアカウントを追加します。

::: warning 注意
AnyRouterはAPIを変更しているため、一部の機能が正常に動作しない可能性があります。問題が発生した場合は、サイト管理者に連絡することをお勧めします。
:::

### 自動認識に失敗した場合はどうすればよいですか？

自動認識に失敗した場合は、以下の方法を試してみてください。

1. **認証方法の切り替え**：Access TokenからCookieモードへの切り替えを試してください。
2. **手動追加**：自動認識に失敗した後、以下の情報を手動で入力します。
   - ユーザー名
   - ユーザーID
   - アクセストークン
   - チャージ倍率
3. **ログイン状態の確認**：対象サイトにブラウザでログインしていることを確認してください。
4. **サイトの互換性の確認**：サイトがサポートされているプロジェクト（下記参照）に基づいているか確認してください。

### どのサイトが互換性がない可能性がありますか？

サイトがディープな二次開発を行い、重要なインターフェース（例：`/api/user`）を変更した場合、プラグインが正常に動作しない可能性があります。

一般的な非互換性の状況：
- ユーザー情報インターフェースが変更された
- アクセストークン機能が無効になっている
- カスタム認証方法が使用されている
- APIレスポンス形式が変更された

## 🐛 機能とバグ関連

### 機能の問題やバグに遭遇した場合はどうすればよいですか？

1. **Issueの確認**：[GitHub Issues](https://github.com/qixing-jk/all-api-hub/issues) にアクセスして、同様の問題がないか検索してください。
2. **最新バージョンの使用**：
   - ストア版の更新は遅いため、GitHub Release版の使用をお勧めします。
   - または、mainブランチの開発版を直接使用してください。

### 最新バージョンを入手するにはどうすればよいですか？

プラグインは複数のプラットフォームでリリースされており、更新速度が異なります。

| プラットフォーム | 更新速度 | バージョン入手 |
|------|--------------|---------|
| **GitHub Releases** | ⚡ 最速 | [ダウンロードはこちら](https://github.com/qixing-jk/all-api-hub/releases) |
| **Chrome Web Store** | 🐌 遅い（3〜5日の審査） | [インストールはこちら](https://chromewebstore.google.com/detail/lapnciffpekdengooeolaienkeoilfeo) |
| **Edge Add-ons** | 🐌 遅い（2〜3日の審査） | [インストールはこちら](https://microsoftedge.microsoft.com/addons/detail/pcokpjaffghgipcgjhapgdpeddlhblaa) |
| **Firefox Add-ons** | ⚡ 速い（数時間の審査） | [インストールはこちら](https://addons.mozilla.org/firefox/addon/中转站管理器-all-api-hub/) |

::: tip 推奨
修正済みのバグに遭遇した場合は、GitHub Releasesから最新バージョンをダウンロードして手動でインストールすることをお勧めします。
:::

## ⚙️ 機能使用の問題

### WebDAVバックアップの使用方法

WebDAVバックアップは、複数のデバイス間でデータを同期するのに役立ちます。

1. **WebDAVの設定**：
   - 「設定」→「WebDAVバックアップ」を開きます。
   - WebDAVサーバーアドレス（完全なURL）を入力します。
   - ユーザー名とパスワードを入力します。
   
2. **同期ポリシーの選択**：
   - `マージ`（推奨）：ローカルデータとリモートデータをインテリジェントにマージします。
   - `アップロードのみ`：ローカルデータをサーバーにアップロードします。
   - `ダウンロードのみ`：サーバーからデータをダウンロードします。

3. **自動同期の有効化**：
   - 「自動同期を有効にする」にチェックを入れます。
   - 同期間隔を設定します（デフォルト3600秒/1時間）。

::: tip 推奨サービス
- [坚果云](https://www.jianguoyun.com/)（中国国内からのアクセスが速い）
- Nextcloud（セルフホスト）
- Synology NAS（Synology）
:::

### CherryStudio / New APIへのエクスポート方法

クイックエクスポート機能を使用すると、サイト設定をワンクリックで他のプラットフォームにインポートできます。

**設定手順**：

1. **New APIの場合**：
   - 「設定」→「基本設定」を開きます。
   - New APIサーバーアドレスを設定します。
   - 管理者トークン（Admin Token）を入力します。
   - ユーザーIDを入力します。

2. **CherryStudioの場合**：
   - 追加の設定は不要です。
   - CherryStudioが実行されていることを確認してください。

**エクスポート手順**：

1. 「キー管理」ページに移動します。
2. エクスポートしたいサイトを見つけます。
3. 操作メニューをクリックします。
4. 「CherryStudioにエクスポート」または「New APIにエクスポート」を選択します。

::: info スマート検出
New APIにエクスポートする際、プラグインは同じチャネルが既に存在するかどうかを自動的に検出し、重複追加を防ぎます。
:::

### サイトのサインイン機能の使用方法

一部のプロキシサイトでは、毎日のサインインで報酬を獲得できます。

1. **サインイン検出の有効化**：
   - アカウントを編集します。
   - 「サインイン検出を有効にする」にチェックを入れます。
   
2. **サインインURLのカスタマイズ**（オプション）：
   - サイトのサインインページが標準パスでない場合。
   - 「カスタムサインインURL」を入力できます。
   - 「カスタムチャージURL」（オプション）を入力します。

3. **サインインの実行**：
   - サインインが必要なアカウントには、サインインアイコンが表示されます。
   - アカウントカードのサインインボタンをクリックします。
   - サインインページが自動的に開きます。

### アカウントの並び順をカスタマイズするにはどうすればよいですか？

プラグインは、複数の並び順設定の優先度を設定できます。

1. **並び順設定へのアクセス**：
   - 「設定」→「並び順優先度設定」を開きます。
   
2. **優先度の調整**：
   - 並び順の条件をドラッグして優先度を調整します。
   - 条件のチェックボックスをオン/オフして有効/無効にします。
   
3. **利用可能な並び順の条件**：
   - 📌 現在のサイトを最上位に表示
   - 🏥 ヘルス状態による並び順（エラー > 警告 > 不明 > 正常）
   - ✅ サインインが必要なアカウントを最上位に表示
   - 🔗 カスタムサインインURLを持つアカウントを最上位に表示
   - 📊 ユーザー定義フィールドによる並び順（残高/消費/名前）

### 自動リフレッシュの設定方法

自動リフレッシュにより、アカウントデータを最新の状態に保つことができます。

1. **自動リフレッシュの有効化**：
   - 「設定」→「自動リフレッシュ」を開きます。
   - 「定期的な自動リフレッシュを有効にする」にチェックを入れます。
   
2. **リフレッシュ間隔の設定**：
   - デフォルト：360秒（6分）
   - 最小：60秒（1分）
   - サイト数に応じて調整します。
   
3. **その他のオプション**：
   - ✅ プラグインを開いたときに自動リフレッシュ
   - ✅ ヘルス状態を表示

::: warning 注意
リフレッシュ間隔が短すぎると頻繁なリクエストが発生する可能性があるため、60秒以上を推奨します。
:::

## 📱 モバイルでの使用

### スマートフォンでどのように使用できますか？

プラグインはモバイルデバイスでの使用をサポートしています。

**Androidデバイス**：
1. [Kiwi Browser](https://play.google.com/store/apps/details?id=com.kiwibrowser.browser) をインストールします（推奨）。
   - Chrome拡張機能と完全に互換性があります。
   - すべての機能がサポートされています。
   
2. または Firefox for Android をインストールします。
   - Firefox Add-onsからインストールします。

**iOSデバイス**：
- 現在サポートされていません（iOSの制限）。

### モバイルでの使用に関する推奨事項

1. **サイドバーモードの使用**：携帯電話の画面により適しています。
2. **自動リフレッシュの有効化**：頻繁な手動リフレッシュを避けます。
3. **WebDAV同期の設定**：PCと携帯電話間でデータを同期します。

## 🔒 データセキュリティ

### データはどこに保存されますか？

- **ローカルストレージ**：すべてのデータはブラウザのローカルストレージに保存されます。
- **完全オフライン**：プラグインのコア機能はインターネット接続を必要としません。
- **データのアップロードなし**：いかなるサードパーティサーバーにもデータをアップロードしません。

### データは失われますか？

定期的なデータバックアップをお勧めします。

1. **JSONエクスポート**：
   - 「設定」→「データ管理」に移動します。
   - 「データのエクスポート」をクリックします。
   - JSONファイルを保存します。

2. **WebDAV同期**（推奨）：
   - クラウドに自動バックアップします。
   - マルチデバイス同期をサポートします。

## 🆘 その他の質問

### サイトの重複検出とは何ですか？

サイトを追加する際、プラグインは同じサイトが既に存在するかどうかを自動的に検出します。
- サイトのURLに基づいて判断します。
- 既に存在する場合、通知が表示され、迅速な修正が可能です。
- 同じサイトの重複追加を防ぎます。

### ヘルス状態の意味は何ですか？

ヘルス状態は、アカウントの可用性を示します。

| 状態 | アイコン | 意味 |
|------|------|------|
| 🟢 正常 | Healthy | アカウントは正常に動作しています。 |
| 🟡 警告 | Warning | 残高不足または注意が必要です。 |
| 🔴 エラー | Error | API呼び出しに失敗したか、アカウントに異常があります。 |
| ⚪ 不明 | Unknown | まだ検出されていないか、状態を取得できません。 |

### プラグインはトラフィックを消費しますか？

- アカウントデータをリフレッシュする際にのみ、サイトAPIにアクセスします。
- リクエスト量は非常に少ないです（各サイト約数KB）。
- 自動リフレッシュは、WiFi環境での使用をお勧めします。

### コードに貢献するにはどうすればよいですか？

Pull Requestの提出を歓迎します。
1. プロジェクトリポジトリをフォークします。
2. 機能ブランチを作成します。
3. コードをコミットします。
4. Pull Requestを作成します。

詳細は：[CONTRIBUTING.md](https://github.com/qixing-jk/all-api-hub/blob/main/CONTRIBUTING.md) を参照してください。

---

## 📚 関連ドキュメント

- [チュートリアル](./get-started.md)
- [GitHubリポジトリ](https://github.com/qixing-jk/all-api-hub)
- [問題フィードバック](https://github.com/qixing-jk/all-api-hub/issues)
- [変更履歴](https://github.com/qixing-jk/all-api-hub/blob/main/CHANGELOG.md)

::: tip 回答が見つからない場合
上記の内容で問題が解決しない場合は、[GitHub Issues](https://github.com/qixing-jk/all-api-hub/issues) で質問してください。
:::